(()=>{var e={};e.id=150,e.ids=[150],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16693:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(55547).registerClientReference)(function(){throw Error("Attempted to call the default export of \"X:\\\\Web Dev\\\\Automica\\\\frontend\\\\app\\\\(admin)\\\\admin\\\\credits\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"X:\\Web Dev\\Automica\\frontend\\app\\(admin)\\admin\\credits\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21876:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45691).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30788:(e,t,s)=>{Promise.resolve().then(s.bind(s,16693))},33873:e=>{"use strict";e.exports=require("path")},37067:e=>{"use strict";e.exports=require("node:http")},37996:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45691).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},41148:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45691).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},44708:e=>{"use strict";e.exports=require("node:https")},54756:(e,t,s)=>{Promise.resolve().then(s.bind(s,98992))},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},94703:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45691).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},98307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(6855),a=s(99880),i=s(44858),n=s.n(i),l=s(84637),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["(admin)",{children:["admin",{children:["credits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,16693)),"X:\\Web Dev\\Automica\\frontend\\app\\(admin)\\admin\\credits\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,42350)),"X:\\Web Dev\\Automica\\frontend\\app\\(admin)\\admin\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,89254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,55007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,42260,23)),"next/dist/client/components/unauthorized-error"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,89254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,55007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,42260,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["X:\\Web Dev\\Automica\\frontend\\app\\(admin)\\admin\\credits\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(admin)/admin/credits/page",pathname:"/admin/credits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},98992:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var r=s(21551),a=s(70794),i=s.n(a),n=s(59630);let l=(0,s(45691).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=s(13838);function o({searchTerm:e,setSearchTerm:t,filterStatus:s,setFilterStatus:a,sortBy:i,setSortBy:n,sortOrder:l,setSortOrder:o}){let c=e=>{let[t,s]=e.split("-");n(t),o(s)};return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search tokens...",value:e,onChange:e=>t(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64"})]}),(0,r.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Tokens"}),(0,r.jsx)("option",{value:"my-tokens",children:"My Tokens"}),(0,r.jsx)("option",{value:"used",children:"Used Only"}),(0,r.jsx)("option",{value:"unused",children:"Unused Only"})]}),(0,r.jsxs)("select",{value:`${i}-${l}`,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"createdAt-desc",children:"Newest First"}),(0,r.jsx)("option",{value:"createdAt-asc",children:"Oldest First"}),(0,r.jsx)("option",{value:"credits-desc",children:"Highest Credits"}),(0,r.jsx)("option",{value:"credits-asc",children:"Lowest Credits"}),(0,r.jsx)("option",{value:"expiresAt-asc",children:"Expiring Soon"}),(0,r.jsx)("option",{value:"expiresAt-desc",children:"Expiring Later"})]})]})}function c({searchTerm:e,setSearchTerm:t,filterStatus:s,setFilterStatus:a,sortBy:i,setSortBy:d,sortOrder:c,setSortOrder:x,onExport:m,onGenerateToken:u}){return(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[(0,r.jsx)(o,{searchTerm:e,setSearchTerm:t,filterStatus:s,setFilterStatus:a,sortBy:i,setSortBy:d,sortOrder:c,setSortOrder:x}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Export"]}),(0,r.jsxs)("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(l,{className:"w-4 h-4"}),"Generate Token"]})]})]})})}var x=s(67322),m=s(33664),u=s(2578),h=s(1480),p=s(81303),g=s(41148);function b({title:e,value:t,icon:s,color:a}){return(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e}),(0,r.jsx)("p",{className:`text-2xl font-bold ${{blue:"text-gray-900",green:"text-green-600",orange:"text-orange-600",purple:"text-purple-600",red:"text-red-600"}[a]}`,children:"number"==typeof t?t.toLocaleString():t})]}),(0,r.jsx)("div",{className:{blue:"text-blue-500",green:"text-green-500",orange:"text-orange-500",purple:"text-purple-500",red:"text-red-500"}[a],children:s})]})})}function y({stats:e}){return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8",children:[(0,r.jsx)(b,{title:"Total Tokens",value:e.total,icon:(0,r.jsx)(x.A,{className:"w-8 h-8"}),color:"blue"}),(0,r.jsx)(b,{title:"Used Tokens",value:e.used,icon:(0,r.jsx)(m.A,{className:"w-8 h-8"}),color:"green"}),(0,r.jsx)(b,{title:"Unused Tokens",value:e.unused,icon:(0,r.jsx)(u.A,{className:"w-8 h-8"}),color:"orange"}),(0,r.jsx)(b,{title:"Total Credits",value:e.totalCredits,icon:(0,r.jsx)(h.A,{className:"w-8 h-8"}),color:"purple"}),(0,r.jsx)(b,{title:"Used Credits",value:e.usedCredits,icon:(0,r.jsx)(p.A,{className:"w-8 h-8"}),color:"red"}),(0,r.jsx)(b,{title:"Available Credits",value:e.availableCredits,icon:(0,r.jsx)(g.A,{className:"w-8 h-8"}),color:"green"})]})}let f=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}),j=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});function v({token:e,onViewDetails:t,onDeleteToken:s,isDeleting:a,formatTokenForDisplay:i,formatDate:n,getDaysUntilExpiry:l,isTokenExpired:d}){let o=d(e.expiresAt),c=l(e.expiresAt);return(0,r.jsxs)("tr",{className:`hover:bg-gray-50 ${a?"opacity-50":""}`,children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)("div",{className:"font-mono text-gray-900 bg-gray-100 px-2 py-1 rounded",children:i(e.token)})})})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.credits.toLocaleString()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isUsed?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Used"}):o?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Expired"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Active"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:n(e.createdAt)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["by ",e.createdBy]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:o?(0,r.jsx)("span",{className:"text-red-600 font-medium",children:"Expired"}):c<=7?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-orange-600 font-medium",children:n(e.expiresAt)}),(0,r.jsxs)("div",{className:"text-xs text-orange-500",children:[c," days left"]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-900",children:n(e.expiresAt)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[c," days left"]})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.description,children:e.description||"No description"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>t(e),disabled:a,className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",title:"View Details",children:(0,r.jsx)(f,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>s(e),disabled:a,className:"text-red-600 hover:text-red-900 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",title:a?"Deleting...":"Delete Token",children:a?(0,r.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):(0,r.jsx)(j,{className:"h-5 w-5"})})]})})]})}function N({hasFilters:e}){return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"mx-auto w-12 h-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tokens found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e?"Try adjusting your search or filter criteria.":"Get started by creating your first token."})]})}var w=s(87182);function k({tokens:e,onViewDetails:t,onTokenDeleted:s,formatTokenForDisplay:i,formatDate:n,getDaysUntilExpiry:l,isTokenExpired:d,hasFilters:o}){let[c,x]=(0,a.useState)(new Set),m=async e=>{if(window.confirm(`Are you sure you want to delete this token?

Token: ${i(e.token)}
Credits: ${e.credits}
Description: ${e.description}

This action cannot be undone.`))try{x(t=>new Set([...t,e.id])),await w.K.deleteToken(e.id),x(t=>{let s=new Set(t);return s.delete(e.id),s}),s()}catch(s){x(t=>{let s=new Set(t);return s.delete(e.id),s});let t=s instanceof Error?s.message:"Failed to delete token";alert(`Error deleting token: ${t}`),console.error("Error deleting token:",s)}};return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Token"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credits"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsx)(v,{token:e,onViewDetails:t,onDeleteToken:m,isDeleting:c.has(e.id),formatTokenForDisplay:i,formatDate:n,getDaysUntilExpiry:l,isTokenExpired:d},e.id))})]})}),0===e.length&&(0,r.jsx)(N,{hasFilters:o})]})}var A=s(29058);function C({isOpen:e,onClose:t,onGenerate:s,isGenerating:i}){let[n,l]=(0,a.useState)(100),[d,o]=(0,a.useState)(""),c=async e=>{if(e.preventDefault(),d.trim())try{await s(n,d),l(100),o("")}catch(e){}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate New Token"}),(0,r.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credits"}),(0,r.jsx)("input",{type:"number",value:n,onChange:e=>l(parseInt(e.target.value)||0),min:"1",max:"10000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:i,required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the number of credits (1-10,000)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:d,onChange:e=>o(e.target.value),rows:3,placeholder:"Enter token description...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",disabled:i,required:!0,maxLength:500}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[d.length,"/500 characters"]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{i||(l(100),o(""),t())},className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:i||!d.trim()||n<1,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i&&(0,r.jsx)(A.A,{className:"w-4 h-4 animate-spin"}),i?"Generating...":"Generate Token"]})]})]})]})})}):null}var T=s(21876),D=s(94703);function S({isOpen:e,onClose:t,token:s,onCopyToken:a}){let[n,l]=i().useState(!1),d=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),o=async()=>{if(s)try{await navigator.clipboard.writeText(s.token),l(!0),a?.(s.token),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Failed to copy token:",e)}};if(!e||!s)return null;let c=s.isUsed?{icon:(0,r.jsx)(m.A,{className:"w-3 h-3 mr-1"}),text:"Used",className:"bg-green-100 text-green-800"}:new Date(s.expiresAt)<new Date?{icon:(0,r.jsx)(p.A,{className:"w-3 h-3 mr-1"}),text:"Expired",className:"bg-red-100 text-red-800"}:{icon:(0,r.jsx)(u.A,{className:"w-3 h-3 mr-1"}),text:"Unused",className:"bg-yellow-100 text-yellow-800"},h=(e=>{let t=new Date(e),s=new Date;return Math.ceil((t.getTime()-s.getTime())/864e5)})(s.expiresAt);return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[85vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 flex-shrink-0",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Token Details"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,r.jsx)("div",{className:"flex-1 px-6 py-4 min-h-0",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Token"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("code",{className:"text-sm font-mono text-gray-900 bg-gray-100 px-2 py-1.5 rounded-md flex-1 break-all",children:s.token}),(0,r.jsx)("button",{onClick:o,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors bg-gray-100 rounded-md hover:bg-gray-200 flex-shrink-0",title:"Copy token",children:n?(0,r.jsx)(T.A,{className:"w-3.5 h-3.5 text-green-600"}):(0,r.jsx)(D.A,{className:"w-3.5 h-3.5"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Credits"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 text-blue-500"}),(0,r.jsx)("span",{className:"text-xl font-bold text-blue-600",children:s.credits.toLocaleString()})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${c.className}`,children:[c.icon,c.text]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Created By"}),(0,r.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:s.createdBy})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Created At"}),(0,r.jsx)("div",{className:"text-sm text-gray-900",children:d(s.createdAt)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expires At"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:d(s.expiresAt)}),(0,r.jsx)("div",{className:`text-xs mt-0.5 font-medium ${h<7?"text-red-600":h<30?"text-orange-600":"text-gray-500"}`,children:h>0?`${h} days remaining`:`Expired ${Math.abs(h)} days ago`})]})]})]}),s.isUsed&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,r.jsxs)("h4",{className:"text-xs font-medium text-green-800 mb-2 flex items-center gap-1.5",children:[(0,r.jsx)(m.A,{className:"w-3.5 h-3.5"}),"Usage Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-green-700 mb-0.5",children:"Used By"}),(0,r.jsx)("div",{className:"text-sm text-green-900 font-medium",children:s.usedBy||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-green-700 mb-0.5",children:"Used At"}),(0,r.jsx)("div",{className:"text-sm text-green-900",children:s.usedAt?d(s.usedAt):"N/A"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg border",children:s.description||(0,r.jsx)("span",{className:"text-gray-500 italic",children:"No description provided"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Token ID"}),(0,r.jsx)("code",{className:"text-xs font-mono text-gray-600 bg-gray-100 px-2 py-1 rounded break-all",children:s.id})]})]})}),(0,r.jsx)("div",{className:"border-t border-gray-100 px-6 py-3 bg-gray-50 rounded-b-xl flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:o,className:"flex-1 px-4 py-2 text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 font-medium border border-blue-200",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{className:"w-4 h-4"}),"Copied!"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.A,{className:"w-4 h-4"}),"Copy Token"]})}),(0,r.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Close"})]})})]})})}var E=s(94341),U=s(37996);function $({title:e,message:t,onDismiss:s,onRetry:a,variant:i="error",retryText:n="Try Again",isRetrying:l=!1}){let d={error:{container:"bg-red-50 border-red-200",icon:"text-red-600",title:"text-red-800",message:"text-red-700",button:"text-red-600 hover:text-red-800"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-600",title:"text-yellow-800",message:"text-yellow-700",button:"text-yellow-600 hover:text-yellow-800"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-600",title:"text-blue-800",message:"text-blue-700",button:"text-blue-600 hover:text-blue-800"}}[i];return(0,r.jsx)("div",{className:`border rounded-lg p-4 ${d.container}`,children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(E.A,{className:`w-5 h-5 ${d.icon}`})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[e&&(0,r.jsx)("h3",{className:`text-sm font-medium ${d.title} mb-1`,children:e}),(0,r.jsx)("div",{className:`text-sm ${d.message}`,children:t}),a&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("button",{onClick:a,disabled:l,className:`inline-flex items-center gap-2 text-sm font-medium ${d.button} hover:underline disabled:opacity-50 disabled:cursor-not-allowed`,children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.A,{className:"w-4 h-4 animate-spin"}),"Retrying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.A,{className:"w-4 h-4"}),n]})})})]}),s&&(0,r.jsx)("div",{className:"ml-auto pl-3",children:(0,r.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,r.jsxs)("button",{onClick:s,className:`inline-flex rounded-md p-1.5 ${d.button} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600`,children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)(U.A,{className:"w-5 h-5"})]})})})]})})}var L=s(98317),P=s(61523);function B(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[n,d]=(0,a.useState)(null),[o,x]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),[h,p]=(0,a.useState)("all"),[g,b]=(0,a.useState)("createdAt"),[f,j]=(0,a.useState)("desc"),[v,N]=(0,a.useState)(!1),[T,D]=(0,a.useState)(!1),[E,U]=(0,a.useState)(null),B=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=e=>w.K.isTokenExpired(e),M=e=>({id:e.id,token:e.token,credits:e.credits,createdBy:e.createdBy,createdAt:e.createdAt,expiresAt:e.expiresAt,isUsed:e.isUsed,usedBy:e.usedBy,usedAt:e.usedAt,description:e.description}),q=async()=>{try{i(!0),d(null);let e=(await w.K.getAllTokens()).tokens.map(M);t(e)}catch(s){let e=s instanceof Error?s.message:"Failed to load tokens. Please try again.";d(e),console.error("Error loading tokens:",s),(e.includes("Authentication")||e.includes("log in"))&&t([])}finally{i(!1)}},O=async()=>{try{i(!0),d(null);let e=(await w.K.getMyTokens()).tokens.map(M);t(e)}catch(e){d(e instanceof Error?e.message:"Failed to load your tokens. Please try again."),console.error("Error loading my tokens:",e)}finally{i(!1)}},_=async(e,s)=>{try{x(!0),d(null);let r=await w.K.generateToken(e,s),a={id:`token-${Date.now()}`,token:r.token,credits:r.credits,createdBy:"current-user",createdAt:new Date().toISOString(),expiresAt:r.expiresAt,isUsed:!1,description:r.description};t(e=>[a,...e]),N(!1),setTimeout(q,500)}catch(e){d(e instanceof Error?e.message:"Failed to generate token. Please try again."),console.error("Error generating token:",e)}finally{x(!1)}},G=async e=>{try{await navigator.clipboard.writeText(e),console.log("Token copied:",w.K.formatTokenForDisplay(e))}catch(e){console.error("Failed to copy token:",e)}},R=(0,a.useMemo)(()=>{let t=e.filter(e=>!!(""===m||e.token.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase())||e.createdBy.toLowerCase().includes(m.toLowerCase()))&&("used"===h?e.isUsed:"unused"!==h||!e.isUsed&&!F(e.expiresAt)));return t.sort((e,t)=>{let s,r;switch(g){case"createdAt":s=new Date(e.createdAt).getTime(),r=new Date(t.createdAt).getTime();break;case"credits":s=e.credits,r=t.credits;break;case"expiresAt":s=new Date(e.expiresAt).getTime(),r=new Date(t.expiresAt).getTime();break;default:return 0}return(s-r)*("asc"===f?1:-1)}),t},[e,m,h,g,f]),K=(0,a.useMemo)(()=>{let t=e.filter(e=>e.isUsed),s=e.filter(e=>!e.isUsed&&!F(e.expiresAt));return{total:e.length,used:t.length,unused:s.length,totalCredits:e.reduce((e,t)=>e+t.credits,0),usedCredits:t.reduce((e,t)=>e+t.credits,0),availableCredits:s.reduce((e,t)=>e+t.credits,0)}},[e]),z=async()=>{try{w.K.refreshAuth(),await q()}catch(e){console.error("Auth refresh failed:",e)}},I=""!==m||"all"!==h;return(0,r.jsxs)(P.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-8 pb-12",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-admin-text-main flex items-center gap-3",children:"Credit Management"}),(0,r.jsx)("p",{className:"text-admin-text-muted mt-1 font-medium",children:"Generate and monitor API credit tokens"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:q,className:"px-4 py-2.5 bg-white border border-admin-border rounded-xl text-sm font-bold text-admin-text-main hover:bg-slate-50 hover:border-admin-primary/30 active:scale-95 transition-all flex items-center gap-2",disabled:s,children:[(0,r.jsx)(A.A,{className:`w-4 h-4 ${s?"animate-spin":""}`}),"Sync Tokens"]}),(0,r.jsxs)("button",{onClick:O,className:"px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-sm font-bold hover:bg-slate-200 active:scale-95 transition-all flex items-center gap-2",disabled:s,children:[(0,r.jsx)(L.A,{className:"w-4 h-4"}),"My Tokens"]}),(0,r.jsxs)("button",{onClick:()=>N(!0),className:"px-4 py-2.5 bg-admin-primary text-white rounded-xl text-sm font-bold shadow-md shadow-admin-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-2",children:[(0,r.jsx)(l,{className:"w-4 h-4"}),"New Token"]})]})]}),n&&(0,r.jsx)($,{message:n,onDismiss:()=>d(null),onRetry:n.includes("Authentication")?z:q,retryText:n.includes("Authentication")?"Login Again":"Reload Tokens"}),s?(0,r.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"bg-white p-6 rounded-2xl border border-admin-border h-32 shadow-sm"},t))}),(0,r.jsx)("div",{className:"bg-white rounded-2xl border border-admin-border h-96 shadow-sm"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{stats:K}),(0,r.jsxs)("div",{className:"bg-white rounded-3xl border border-admin-border shadow-sm overflow-hidden mt-8",children:[(0,r.jsx)(c,{searchTerm:m,setSearchTerm:u,filterStatus:h,setFilterStatus:p,sortBy:g,setSortBy:b,sortOrder:f,setSortOrder:j,onExport:()=>{try{let e=["Token,Credits,Status,Created By,Created,Expires,Used By,Used At,Description",...R.map(e=>{let t=e.isUsed?"Used":F(e.expiresAt)?"Expired":"Unused";return`"${e.token}",${e.credits},"${t}","${e.createdBy}","${B(e.createdAt)}","${B(e.expiresAt)}","${e.usedBy||""}","${e.usedAt?B(e.usedAt):""}","${e.description}"`})].join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`tokens-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}catch(e){d("Failed to export tokens. Please try again."),console.error("Error exporting tokens:",e)}},onGenerateToken:()=>N(!0)}),(0,r.jsx)(k,{tokens:R,onViewDetails:e=>{U(e),D(!0)},onTokenDeleted:()=>{"my-tokens"===h?O():q()},formatTokenForDisplay:e=>w.K.formatTokenForDisplay(e),formatDate:B,getDaysUntilExpiry:e=>w.K.getDaysUntilExpiry(e),isTokenExpired:F,hasFilters:I})]}),(0,r.jsx)(C,{isOpen:v,onClose:()=>N(!1),onGenerate:_,isGenerating:o}),(0,r.jsx)(S,{isOpen:T,onClose:()=>D(!1),token:E,onCopyToken:G})]})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[991,83,161,534,539,675,153],()=>s(98307));module.exports=r})();