(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5867],{696:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var s=a(72311),r=a(62847),n=a(59390),i=a(51252),l=a(73223),o=a(43074),c=a(15587),d=a(75127),h=a(40553),u=a(44960),m=a(7029),x=a(72833);let g=(0,a(94853).A)("fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);var y=a(94930),p=a(37790);function b(e){let{initialUser:t,initialRoles:a}=e,[b,w]=(0,r.useState)(0),[j,A]=(0,r.useState)({name:"--",calls:0}),[N,S]=(0,r.useState)(!0),[U,D]=(0,r.useState)(!0),[E,T]=(0,r.useState)(null),[_,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{async function e(){try{D(!0),R(null);let e=await n.K.getGlobalUsageStats();if(e.stats&&e.stats.length>0){let t=e.stats.reduce((e,t)=>e.total_calls>t.total_calls?e:t),a=t.service_name.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");A({name:a,calls:t.total_calls})}else A({name:"No data",calls:0})}catch(e){R("Failed to load usage stats: ".concat(e instanceof Error?e.message:"Unknown error")),A({name:"Error",calls:0})}finally{D(!1)}}(async function(){try{var e;S(!0),T(null);let t=await n.K.getAllUsers();w(t.count||(null==(e=t.users)?void 0:e.length)||0)}catch(e){T("Failed to load user count: ".concat(e instanceof Error?e.message:"Unknown error")),w(0)}finally{S(!1)}})(),e()},[]);let q={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return(0,s.jsxs)(p.P.div,{className:"space-y-8 pb-12",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-admin-text-main",children:"Dashboard Overview"}),(0,s.jsxs)("p",{className:"text-admin-text-muted mt-1 font-medium",children:["Welcome back, ",(null==t?void 0:t.given_name)||"Admin","!"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{className:"px-4 py-2 bg-white border border-admin-border rounded-xl text-sm font-semibold hover:bg-slate-50 transition-all flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-4 h-4"}),"Dec 30, 2025"]}),(0,s.jsxs)("button",{className:"px-4 py-2 bg-admin-primary text-white rounded-xl text-sm font-bold shadow-md shadow-admin-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"w-4 h-4"}),"Generate Report"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(f,{title:"Total Users",value:N?"--":b.toString(),icon:o.A,color:"blue",loading:N,error:null!==E}),(0,s.jsx)(f,{title:"Most Used Service",value:U?"--":j.name,subValue:U?"":"".concat(j.calls," total calls"),icon:c.A,color:"indigo",loading:U,error:null!==_}),(0,s.jsx)(f,{title:"System Health",value:"Healthy",icon:d.A,color:"green",subValue:"99.9% uptime"}),(0,s.jsx)(f,{title:"Pending Alerts",value:"02",icon:h.A,color:"amber",subValue:"Requires attention",isWarning:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)(p.P.div,{variants:q,className:"lg:col-span-2 bg-white rounded-2xl border border-admin-border shadow-sm overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-admin-border flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-admin-primary"}),"Administrative Information"]}),(0,s.jsx)("span",{className:"px-3 py-1 bg-admin-primary/10 text-admin-primary text-xs font-bold rounded-full",children:"Full Access"})]}),(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsx)(k,{icon:m.A,label:"Full Name",value:"".concat(null==t?void 0:t.given_name," ").concat(null==t?void 0:t.family_name)}),(0,s.jsx)(k,{icon:x.A,label:"Email Address",value:null==t?void 0:t.email}),(0,s.jsx)(k,{icon:g,label:"User ID",value:null==t?void 0:t.id,isCode:!0}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-xs font-bold text-admin-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[(0,s.jsx)(d.A,{className:"w-3.5 h-3.5"})," Assignments"]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 pt-1",children:[null==a?void 0:a.map(e=>(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-lg text-xs font-bold bg-slate-100 text-slate-700 border border-slate-200",children:e.name},e.id)),(!a||0===a.length)&&(0,s.jsx)("span",{className:"text-sm text-slate-400",children:"No roles assigned"})]})]})]})}),(0,s.jsx)("div",{className:"p-6 bg-slate-50 border-t border-admin-border flex justify-end",children:(0,s.jsxs)("button",{className:"text-sm font-bold text-admin-primary hover:underline flex items-center gap-1 transition-all",children:["Update Profile Settings ",(0,s.jsx)(y.A,{className:"w-4 h-4"})]})})]}),(0,s.jsxs)(p.P.div,{variants:q,className:"bg-white rounded-2xl border border-admin-border shadow-sm overflow-hidden flex flex-col",children:[(0,s.jsx)("div",{className:"p-6 border-b border-admin-border",children:(0,s.jsx)("h3",{className:"text-lg font-bold",children:"Recent System Logs"})}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,s.jsx)(v,{title:"New user registered",time:"2 minutes ago",status:"success",description:"User 'john.doe@example.com' joined the platform."}),(0,s.jsx)(v,{title:"Usage limit reached",time:"1 hour ago",status:"warning",description:"Service 'Image Generation' hit 90% quota."}),(0,s.jsx)(v,{title:"System backup completed",time:"3 hours ago",status:"info",description:"Automated weekly backup was successful."})]}),(0,s.jsx)("button",{className:"w-full p-4 text-xs font-bold text-admin-text-muted border-t border-admin-border hover:bg-slate-50 transition-all",children:"VIEW ALL LOGS"})]})]}),(E||_)&&(0,s.jsxs)(p.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 rounded-2xl p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 text-red-800",children:[(0,s.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,s.jsx)(h.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold",children:"Data Synchronization Error"}),(0,s.jsx)("p",{className:"text-sm opacity-90",children:"Some statistics couldn't be loaded from the server."})]})]}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white font-bold rounded-xl text-sm shadow-lg shadow-red-600/20 hover:bg-red-700 active:scale-95 transition-all",children:"Retry Sync"})]})]})}function f(e){let{title:t,value:a,subValue:r,icon:n,color:i,loading:l,error:o,isWarning:c}=e,d={blue:"bg-blue-500 shadow-blue-500/20",indigo:"bg-indigo-500 shadow-indigo-500/20",green:"bg-emerald-500 shadow-emerald-500/20",amber:"bg-amber-500 shadow-amber-500/20",red:"bg-red-500 shadow-red-500/20"};return(0,s.jsxs)(p.P.div,{whileHover:{y:-4},className:"bg-white p-6 rounded-2xl border border-admin-border shadow-sm hover:shadow-md transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl text-white ".concat(d[i]||d.blue),children:(0,s.jsx)(n,{className:"w-6 h-6"})}),c&&(0,s.jsx)("span",{className:"flex h-2 w-2 rounded-full bg-red-500 animate-ping"})]}),(0,s.jsxs)("div",{className:"mt-5",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-admin-text-muted uppercase tracking-wider",children:t}),(0,s.jsx)("div",{className:"mt-1 flex items-baseline gap-2",children:l?(0,s.jsx)("div",{className:"h-9 w-20 bg-slate-100 animate-pulse rounded-lg mt-2"}):o?(0,s.jsx)("span",{className:"text-red-500 text-sm font-bold",children:"Error"}):(0,s.jsx)("h4",{className:"text-3xl font-extrabold text-admin-text-main tracking-tight",children:a})}),r&&!l&&(0,s.jsx)("p",{className:"mt-2 text-xs font-semibold text-admin-text-muted flex items-center gap-1",children:r})]})]})}function k(e){let{icon:t,label:a,value:r,isCode:n}=e;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-xs font-bold text-admin-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[(0,s.jsx)(t,{className:"w-3.5 h-3.5"})," ",a]}),(0,s.jsx)("p",{className:"text-base font-semibold text-admin-text-main truncate ".concat(n?"font-mono text-xs bg-slate-50 px-2 py-1 rounded-md border border-slate-100 w-fit":""),children:r||"N/A"})]})}function v(e){let{title:t,time:a,status:r,description:n}=e;return(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full ".concat({success:"bg-emerald-500",warning:"bg-amber-500",info:"bg-blue-500",error:"bg-red-500"}[r]," z-10 relative")}),(0,s.jsx)("div",{className:"absolute top-2.5 bottom-0 left-1/2 -translate-x-1/2 w-0.5 bg-slate-100 -mb-10 group-last:hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-admin-text-main",children:t}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-admin-text-muted",children:a})]}),(0,s.jsx)("p",{className:"text-xs text-admin-text-muted leading-relaxed",children:n})]})]})}},15587:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},27875:(e,t,a)=>{Promise.resolve().then(a.bind(a,696))},40553:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},43074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},44960:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},51252:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},59390:(e,t,a)=>{"use strict";a.d(t,{K:()=>r});class s{async getAuthToken(){if(this.authToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry-3e5)return this.authToken;try{let e=await fetch("/api/auth",{credentials:"include"});if(!e.ok)throw Error("Auth failed: ".concat(e.status));let{accessToken:t,expiresIn:a}=await e.json();return this.authToken=t,this.tokenExpiry=Date.now()+1e3*a,t}catch(e){throw this.clearAuth(),Error("Authentication failed. Please log in again.")}}clearAuth(){this.authToken=null,this.tokenExpiry=null}buildQueryString(e){let t=Object.entries(e).filter(e=>{let[t,a]=e;return null!=a&&""!==a});if(0===t.length)return"";let a=t.map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");return"?".concat(a)}async makeAuthenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await this.getAuthToken(),s=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),...t.headers}});if(!s.ok){if(401===s.status)throw this.clearAuth(),Error("Authentication expired. Please log in again.");let e=await s.text();throw Error("API Error (".concat(s.status,"): ").concat(e))}return s.json()}async generateToken(e,t){return this.makeAuthenticatedRequest("/tokens/generate",{method:"POST",body:JSON.stringify({credits:e,description:t})})}async deleteToken(e){return this.makeAuthenticatedRequest("/tokens/".concat(e),{method:"DELETE"})}async getMyTokens(){return this.makeAuthenticatedRequest("/tokens/my-tokens")}async getAllTokens(){return this.makeAuthenticatedRequest("/tokens/all")}async getUsedTokens(){return this.makeAuthenticatedRequest("/tokens/used")}async getUnusedTokens(){return this.makeAuthenticatedRequest("/tokens/unused")}async getAllUsers(){return this.makeAuthenticatedRequest("/admin/users")}async getUserById(e){return this.makeAuthenticatedRequest("/admin/users/".concat(e))}async getUserStats(){return this.makeAuthenticatedRequest("/admin/users/stats")}async getUserActivity(e){return this.makeAuthenticatedRequest("/admin/users/".concat(e,"/activity"))}async getUserCredits(e){return this.makeAuthenticatedRequest("/admin/users/".concat(e,"/credits"))}async getGlobalUsageStats(e){let t=e?this.buildQueryString(e):"";return this.makeAuthenticatedRequest("/admin/usage/global".concat(t))}async getUserUsageStats(e){let t=e?this.buildQueryString(e):"";return this.makeAuthenticatedRequest("/admin/usage/users".concat(t))}async getServiceUserStats(e){let t=e?this.buildQueryString(e):"";return this.makeAuthenticatedRequest("/admin/usage/services".concat(t))}async getUserUsageHistory(e,t){let a=t?this.buildQueryString(t):"";return this.makeAuthenticatedRequest("/admin/usage/user/".concat(e,"/history").concat(a))}async getServiceUsageHistory(e,t){let a=t?this.buildQueryString(t):"";return this.makeAuthenticatedRequest("/admin/usage/service/".concat(e,"/history").concat(a))}isAuthenticated(){return!!(this.authToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}getTokenExpiry(){return this.tokenExpiry}refreshAuth(){this.clearAuth()}async getTokenStats(){try{let[e,t,a,s]=await Promise.all([this.getAllTokens(),this.getUsedTokens(),this.getUnusedTokens(),this.getMyTokens()]);return{total:e.count||e.tokens.length,used:t.count||t.tokens.length,unused:a.count||a.tokens.length,myTokens:s.count||s.tokens.length}}catch(e){throw Error("Failed to fetch token statistics: ".concat(e))}}async getDashboardStats(){try{let[e,t]=await Promise.all([this.getTokenStats(),this.getUserStats()]);return{tokenStats:e,userStats:t.stats}}catch(e){throw Error("Failed to fetch dashboard statistics: ".concat(e))}}async getUsageAnalytics(e){try{let[t,a,s]=await Promise.all([this.getGlobalUsageStats(e),this.getUserUsageStats(e),this.getServiceUserStats(e)]);return{globalStats:t,userStats:a,serviceStats:s}}catch(e){throw Error("Failed to fetch usage analytics: ".concat(e))}}async getTopServicesByUsage(e){try{return(await this.getGlobalUsageStats(e)).stats.sort((e,t)=>t.total_calls-e.total_calls)}catch(e){throw Error("Failed to fetch top services: ".concat(e))}}async getTopUsersByUsage(e){try{return(await this.getUserUsageStats(e)).stats.sort((e,t)=>t.total_calls-e.total_calls)}catch(e){throw Error("Failed to fetch top users: ".concat(e))}}isValidTokenFormat(e){return/^TK_[a-zA-Z0-9]{33}$/.test(e)}formatTokenForDisplay(e){return!e||e.length<10?e:"".concat(e.substring(0,8),"...").concat(e.substring(e.length-6))}getDaysUntilExpiry(e){let t=new Date(e),a=new Date;return Math.ceil((t.getTime()-a.getTime())/864e5)}isTokenExpired(e){return new Date(e)<new Date}formatUserRole(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}isUserRecentlyActive(e){return!!e&&new Date(e)>new Date(Date.now()-2592e6)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}formatDateForQuery(e){return e.toISOString().split("T")[0]}calculateSuccessRate(e,t){return 0===t?0:Math.round(e/t*1e4)/100}formatServiceName(e){return e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}getDateRangePresets(){let e=new Date,t=this.formatDateForQuery(e),a=new Date(e);a.setDate(a.getDate()-1);let s=new Date(e);s.setDate(s.getDate()-7);let r=new Date(e);r.setDate(r.getDate()-30);let n=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()-1,1),l=new Date(e.getFullYear(),e.getMonth(),0);return{today:{start_date:t,end_date:t},yesterday:{start_date:this.formatDateForQuery(a),end_date:this.formatDateForQuery(a)},last7Days:{start_date:this.formatDateForQuery(s),end_date:t},last30Days:{start_date:this.formatDateForQuery(r),end_date:t},thisMonth:{start_date:this.formatDateForQuery(n),end_date:t},lastMonth:{start_date:this.formatDateForQuery(i),end_date:this.formatDateForQuery(l)}}}constructor(){this.authToken=null,this.tokenExpiry=null,this.baseUrl="https://dev.automica.ai/go/api/v1"}}let r=new s},72833:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},73223:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},75127:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},94930:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(94853).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[3778,5789,6020,7358],()=>t(27875)),_N_E=e.O()}]);