(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{24499:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var s=r(62847),a=r(99759);let i=e=>e,n=e=>{let t=(0,a.y)(e),r=e=>(function(e,t=i){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?n(e):n},26683:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(72311),a=r(62847),i=r(74652),n=r(81673);function o(){let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[l,d]=(0,a.useState)("idle"),[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),{credits:f}=(0,n.dd)(),x=async()=>{if(!e.trim()){d("error"),o("Please enter a token.");return}u(!0),d("loading"),o("Redeeming token..."),g(f||0);try{let r=await i.K.redeemToken(e);if(r.message&&r.message.toLowerCase().includes("success")){d("success"),m(r.creditsAdded||0);let e="Token redeemed successfully!";r.creditsAdded&&(e+=" +".concat(r.creditsAdded," credits added")),r.remainingCredits&&(e+=" â€¢ New balance: ".concat(r.remainingCredits," credits")),o(e),t(""),setTimeout(()=>{"success"===l&&(d("idle"),o(""),m(null),g(null))},5e3)}else d("error"),o("".concat(r.message||"Token redemption failed"))}catch(e){if(d("error"),e.message.includes("Invalid token format"))o("Invalid token format. Please check your token and try again.");else if(e.message.includes("Authentication failed"))o("Authentication failed. Please log in and try again.");else if(e.message.includes("Network error"))o("Network error. Please check your connection and try again.");else{var r;let t=(null==(r=e.errorData)?void 0:r.message)||e.message||"Failed to redeem token. Please try again.";o("".concat(t))}console.error("Token redemption failed:",e)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen pt-32 bg-[#0b0b0d] relative overflow-hidden flex items-center justify-center p-4",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-purple-500/5 rounded-full blur-[100px]"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-500/5 rounded-full blur-[100px]"})]}),(0,s.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsxs)("div",{className:"inline-block mb-6",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-purple-400 tracking-widest uppercase",children:"Credit System"}),(0,s.jsx)("div",{className:"w-20 h-[1px] bg-gradient-to-r from-transparent via-purple-500 to-transparent mx-auto mt-3"})]}),(0,s.jsxs)("h1",{className:"text-4xl font-light text-white mb-3 tracking-tight",children:["Add ",(0,s.jsx)("span",{className:"text-purple-400",children:"Credits"})]}),(0,s.jsx)("p",{className:"text-gray-400 font-light text-lg",children:"Redeem your token to top up your balance"})]}),(0,s.jsxs)("div",{className:"relative overflow-hidden bg-white/[0.02] border border-white/10 backdrop-blur-xl rounded-2xl p-6 mb-6 shadow-2xl group hover:border-purple-500/20 transition-all duration-300",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm font-medium uppercase tracking-wider mb-1",children:"Current Balance"}),(0,s.jsxs)("p",{className:"text-3xl font-light text-white tracking-tight",children:["number"==typeof f?f.toLocaleString():"..."," ",(0,s.jsx)("span",{className:"text-sm text-gray-500 font-normal",children:"credits"})]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-xl border border-white/5 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})]}),(0,s.jsxs)("div",{className:"relative bg-white/[0.02] border border-white/10 backdrop-blur-xl rounded-2xl p-8 shadow-2xl",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 ml-1",children:"Redemption Token"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("input",{type:"text",placeholder:"Paste your 32-character token here...",value:e,onChange:e=>{t(e.target.value),"idle"!==l&&(d("idle"),o(""))},onKeyPress:e=>{"Enter"!==e.key||c||x()},disabled:c,className:"w-full px-5 py-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-purple-500/50 transition-all duration-300 font-light tracking-wide text-sm",maxLength:32}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-500 group-focus-within:text-purple-400 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M15 7a2 2 0 012 2m0 0a2 2 0 012 2m-2-2a2 2 0 00-2 2m2-2V5a2 2 0 00-2-2H9a2 2 0 00-2 2v2m0 0a2 2 0 00-2 2m2-2a2 2 0 012 2m0 0V9a2 2 0 012-2m-2 2a2 2 0 002 2"})})})]})]}),(0,s.jsx)("button",{onClick:x,disabled:c||!e.trim(),className:"group relative w-full py-4 px-6 rounded-xl font-medium text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-[1.02] flex items-center justify-center ".concat(c||!e.trim()?"bg-white/5 text-gray-500 border border-white/5 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-purple-800 text-white hover:from-purple-600 hover:to-purple-900 shadow-purple-500/20"),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white/70",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"text-white/90",children:"Processing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"Redeem Token"}),(0,s.jsx)("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]}),"idle"!==l&&(0,s.jsx)("div",{className:"mt-6 p-4 rounded-xl border backdrop-blur-sm transition-all duration-300 overflow-hidden ".concat("success"===l?"bg-green-500/10 border-green-500/20 text-green-400":"error"===l?"bg-red-500/10 border-red-500/20 text-red-400":"bg-blue-500/10 border-blue-500/20 text-blue-400"),children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5 mr-3",children:"success"===l?(0,s.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):"error"===l?(0,s.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,s.jsx)("div",{className:"text-sm font-light leading-relaxed opacity-90",children:r})]})})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500 font-light",children:["Need more credits?",(0,s.jsx)("a",{href:"/contact",className:"text-purple-400 hover:text-purple-300 ml-1 hover:underline transition-colors",children:"Contact support"})]})})]})]})}},38097:(e,t,r)=>{Promise.resolve().then(r.bind(r,26683))},74652:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,K:()=>i});var s=r(81673);class a{async getAuthToken(){if(this.authToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry-3e5)return this.authToken;try{let e=await fetch("/api/auth",{credentials:"include"});if(!e.ok)throw Error("Auth failed: ".concat(e.status));let{accessToken:t,expiresIn:r}=await e.json();return this.authToken=t,this.tokenExpiry=Date.now()+1e3*r,t}catch(e){throw this.clearAuth(),Error("Authentication failed. Please log in again.")}}clearAuth(){this.authToken=null,this.tokenExpiry=null}generateReqId(e){return"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}updateCreditsFromResponse(e){var t;let r=null!=(t=null==e?void 0:e.remainingCredits)?t:null==e?void 0:e.remaining_credits;if(e&&"number"==typeof r){let{updateCredits:e}=s.dd.getState();e(r),console.log("Credits updated from API response:",r)}else console.log("No credits found in response:",e)}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s="".concat(this.baseUrl).concat(e);try{let a=await this.getAuthToken();console.log("Making request to: ".concat(s)),console.log("Request payload:",t.body);let i=await fetch(s,{...t,headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json",...t.headers}});if(401===i.status&&r)return console.log("Auth token expired, retrying..."),this.clearAuth(),this.makeRequest(e,t,!1);if(!i.ok){let e={},t="API request failed: ".concat(i.status," ").concat(i.statusText);try{let r=i.headers.get("content-type");if(r&&r.includes("application/json"))t=(e=await i.json()).message||e.error||t;else{let e=await i.text();console.error("Non-JSON error response:",e),t="".concat(t," - ").concat(e.slice(0,200))}}catch(e){console.error("Failed to parse error response:",e)}console.error("API Error Details:",{url:s,status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries()),errorData:e});let r=Error(t);throw r.errorData=e,r}let n=await i.json();return console.log("API Response:",n),this.updateCreditsFromResponse(n),n}catch(t){if(console.error("API request to ".concat(e," failed:"),t),t instanceof TypeError&&t.message.includes("fetch"))throw Error("Network error: Unable to connect to ".concat(this.baseUrl,". Please check if the server is running."));throw t}}async getCreditsBalance(){let e=await this.makeRequest("/credits/balance"),{setCredits:t}=s.dd.getState();return t(e.credits,e.userId),e}async redeemToken(e){if(!e||"string"!=typeof e||0===e.trim().length)throw Error("Invalid token provided");let t=e.trim();if(!/^[a-f0-9]{32}$/.test(t))throw Error("Invalid token format. Token must be a 32-character hexadecimal string.");console.log("Redeeming token:",t.slice(0,8)+"...");let r=await this.makeRequest("/tokens/redeem",{method:"POST",body:JSON.stringify({token:t})}),a={success:!0,message:r.message,remainingCredits:r.remainingCredits,creditsAdded:r.credits,userId:void 0};if("number"==typeof r.remainingCredits){let{setCredits:e}=s.dd.getState(),{userId:t}=s.dd.getState();e(r.remainingCredits,t||""),console.log("Credits updated after token redemption:",r.remainingCredits)}return a}async createApiKey(){console.log("Creating API key with default settings...");let e=await this.makeRequest("/api-keys",{method:"POST",body:JSON.stringify({})});return console.log("API key created successfully:",{keyName:e.keyName,keyPrefix:e.keyPrefix,expiresAt:e.expiresAt,createdAt:e.createdAt}),e}async maskQRCode(e){let t=this.generateReqId("qr-mask");if(!e||"string"!=typeof e)throw Error("Invalid base64 image data");return this.makeRequest("/qr-masking",{method:"POST",body:JSON.stringify({req_id:t,base64_str:e})})}async extractQRCode(e){let t=this.generateReqId("qr-extract");if(!e||"string"!=typeof e)throw Error("Invalid base64 image data provided");let r=e.replace(/^data:image\/[a-z]+;base64,/,"");try{atob(r)}catch(e){throw Error("Invalid base64 format")}return console.log("Sending QR extraction request with:",{req_id:t,base64_length:r.length,base64_sample:r.slice(0,50)+"..."}),this.makeRequest("/qr-extraction",{method:"POST",body:JSON.stringify({req_id:t,doc_base64:r})})}async processIdCrop(e){let t=this.generateReqId("id-crop");if(!e||"string"!=typeof e)throw Error("Invalid base64 image data");let r=e.replace(/^data:image\/[a-z]+;base64,/,"");return this.makeRequest("/id-cropping",{method:"POST",body:JSON.stringify({req_id:t,doc_base64:r})})}async verifySignatures(e){if(!Array.isArray(e)||2!==e.length)throw Error("Signature verification requires exactly 2 images");let t=e.map((e,t)=>{if(!e||"string"!=typeof e)throw Error("Invalid base64 data for image ".concat(t+1));return e.replace(/^data:image\/[a-z]+;base64,/,"")}),r=this.generateReqId("sig-verify");return this.makeRequest("/signature-verification",{method:"POST",body:JSON.stringify({req_id:r,doc_base64:t})})}async detectFace(e){let t=this.generateReqId("face-cropping");if(!e||"string"!=typeof e)throw Error("Invalid base64 image data");let r=e.replace(/^data:image\/[a-z]+;base64,/,"");return this.makeRequest("/face-detect",{method:"POST",body:JSON.stringify({req_id:t,doc_base64:r})})}async verifyFace(e,t){let r=this.generateReqId("face-verify");if(!e||!t)throw Error("Both images are required for face verification");let s=e.replace(/^data:image\/[a-z]+;base64,/,""),a=t.replace(/^data:image\/[a-z]+;base64,/,"");return this.makeRequest("/face-verification",{method:"POST",body:JSON.stringify({req_id:r,doc_base64_1:s,doc_base64_2:a,doc_type:"face"})})}async healthCheck(){let e=new AbortController,t=setTimeout(()=>e.abort(),1e4);try{let r=await this.makeRequest("/health",{signal:e.signal});return clearTimeout(t),r}catch(e){if(clearTimeout(t),e instanceof Error&&"AbortError"===e.name)throw Error("Health check timeout - server may be down");throw e}}async testConnection(){try{return await this.healthCheck(),!0}catch(e){return console.error("Connection test failed:",e),!1}}constructor(){this.authToken=null,this.tokenExpiry=null,this.baseUrl="https://automica.ai/go/api/v1"}}let i=new a,n=i},81673:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>l,Eh:()=>u,I:()=>o,Vq:()=>d,Yg:()=>c,dd:()=>n});var s=r(24499),a=r(88128);let i={credits:null,loading:!1,error:null,userId:null},n=(0,s.v)()((0,a.lt)((e,t)=>({...i,setCredits:(t,r)=>{e(e=>({...e,credits:t,userId:r||e.userId,error:null}),!1,"setCredits")},updateCredits:t=>{e(e=>({...e,credits:t,error:null}),!1,"updateCredits")},setLoading:t=>{e(e=>({...e,loading:t}),!1,"setLoading")},setError:t=>{e(e=>({...e,error:t,loading:!1}),!1,"setError")},reset:()=>{e(i,!1,"reset")}}),{name:"credits-store"})),o=()=>n(e=>e.credits),l=()=>n(e=>e.setCredits),d=()=>n(e=>e.updateCredits),c=()=>n(e=>e.setLoading),u=()=>n(e=>e.setError)},88128:(e,t,r)=>{"use strict";r.d(t,{lt:()=>l});let s=new Map,a=e=>{let t=s.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},i=(e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};let a=s.get(r.name);if(a)return{type:"tracked",store:e,...a};let i={connection:t.connect(r),stores:{}};return s.set(r.name,i),{type:"tracked",store:e,...i}},n=(e,t)=>{if(void 0===t)return;let r=s.get(e);r&&(delete r.stores[t],0===Object.keys(r.stores).length&&s.delete(e))},o=e=>{var t,r;if(!e)return;let s=e.split("\n"),a=s.findIndex(e=>e.includes("api.setState"));if(a<0)return;let i=(null==(t=s[a+1])?void 0:t.trim())||"";return null==(r=/.+ (.+) .+/.exec(i))?void 0:r[1]},l=(e,t={})=>(r,s,l)=>{let c,{enabled:u,anonymousActionType:h,store:m,...p}=t;try{c=(null==u||u)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!c)return e(r,s,l);let{connection:g,...f}=i(m,c,p),x=!0;l.setState=(e,t,i)=>{let n=r(e,t);if(!x)return n;let d=void 0===i?{type:h||o(Error().stack)||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===m?null==g||g.send(d,s()):null==g||g.send({...d,type:`${m}/${d.type}`},{...a(p.name),[m]:l.getState()}),n},l.devtools={cleanup:()=>{g&&"function"==typeof g.unsubscribe&&g.unsubscribe(),n(p.name,m)}};let y=(...e)=>{let t=x;x=!1,r(...e),x=t},v=e(l.setState,s,l);if("untracked"===f.type?null==g||g.init(v):(f.stores[f.store]=l,null==g||g.init(Object.fromEntries(Object.entries(f.stores).map(([e,t])=>[e,e===f.store?v:t.getState()])))),l.dispatchFromDevtools&&"function"==typeof l.dispatch){let e=!1,t=l.dispatch;l.dispatch=(...r)=>{"__setState"!==r[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...r)}}return g.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return d(e.payload,e=>{if("__setState"===e.type){if(void 0===m)return void y(e.state);1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[m];return void(null==t||JSON.stringify(l.getState())!==JSON.stringify(t)&&y(t))}l.dispatchFromDevtools&&"function"==typeof l.dispatch&&l.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(y(v),void 0===m)return null==g?void 0:g.init(l.getState());return null==g?void 0:g.init(a(p.name));case"COMMIT":if(void 0===m){null==g||g.init(l.getState());break}return null==g?void 0:g.init(a(p.name));case"ROLLBACK":return d(e.state,e=>{if(void 0===m){y(e),null==g||g.init(l.getState());return}y(e[m]),null==g||g.init(a(p.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return d(e.state,e=>{if(void 0===m)return void y(e);JSON.stringify(l.getState())!==JSON.stringify(e[m])&&y(e[m])});case"IMPORT_STATE":{let{nextLiftedState:r}=e.payload,s=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!s)return;void 0===m?y(s):y(s[m]),null==g||g.send(null,r);break}case"PAUSE_RECORDING":return x=!x}return}}),v},d=(e,t)=>{let r;try{r=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==r&&t(r)}},99759:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});let s=e=>{let t,r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:s,getState:a,getInitialState:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e))},n=t=e(s,a,i);return i},a=e=>e?s(e):s}},e=>{var t=t=>e(e.s=t);e.O(0,[5789,6020,7358],()=>t(38097)),_N_E=e.O()}]);